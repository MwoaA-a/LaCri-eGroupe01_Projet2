{% extends 'base.html.twig' %}

{% block title %}Les Lots de la criée{% endblock %}

{% block body %}
<div class="example-wrapper">
    <h1 id="date">Voici la liste des lots destinée l'équarrissage du {{ currentDate }} :</h1>
</div>
<div class="d-flex flex-row ps-5 justify-content-center col-10 lead">
    <table class="table">
        <thead>
            <tr>
                <div class="p-2">
                    <th>Num Lots</th>
                </div>
                <div class="p-2">
                    <th>Nom du Bateau</th>
                </div>
                <div class="p-2">
                    <th>Espèce de poisson</th>
                </div>
                <div class="p-2">
                    <th>Poids du lots</th>
                </div>
                <div class="p-2">
                    <th>Code état</th>
                </div>
            </tr>
        <thead>
        <tbody class="text-align">
            {# {{ dump(equa) }} #}
            {% for var in equa %}
            <tr>
                <td>{{var.id}}</td>
                <td>{{var.nom}}</td>
                <td>{{var.asd}}</td>
                <td>{{var.poidsBrutLot}} Kg</td>
                <td>{{var.label}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div class="d-flex flex-row-reverse ps-5 col-10">
    <div class="col-2 ps-5 pe-5"><a href="/equarrissage/{{ CurrentDateBtn }}.pdf"  target="_blank" ><button type="button" class="btn btn-primary"  id="liveToastBtn">Génération du pdf</button></a></div>
</div>
<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">
        <img src="{{ asset('img/criée.png') }}" class="rounded me-2" width=10% height=10% alt"La criée">
        <strong class="me-auto">La Criée de Poulgoazec</strong>
        <small>PDF</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        Votre PDF viens d'être généré
      </div>
    </div>
  </div>
<script>
    const toastTrigger = document.getElementById('liveToastBtn')
    const toastLiveExample = document.getElementById('liveToast')

    if (toastTrigger) {
        const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample)
        toastTrigger.addEventListener('click', () => {
            toastBootstrap.show()
        })
    }
</script>
{% endblock %}
